<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create New Diary Entry</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/create.css" />
  </head>
  <body style="background-color: #ffffed">
    <div class="top-color">
      <div class="container top nav">
        <div class="row w-100">
          <div class="col-2">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link text-black" aria-current="page" href="/"
                  >Home</a
                >
              </li>
              <li class="nav-item text-decoration-underline">
                <a class="nav-link text-black" href="/create">Create Notes</a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-black" href="/read">View Notes</a>
              </li>
            </ul>
          </div>
          <div class="col-10 img">
            <h1>Create New Diary Entry</h1>

            <form action="/create" method="POST">
              <label for="date">Date:</label>
              <input
                type="date"
                id="date"
                name="date"
                required
                style="width: 90%"
              />

              <label for="day">Day:</label>
              <input
                type="text"
                id="day"
                name="day"
                required
                style="width: 90%"
              />

              <label for="title">Title:</label>
              <input
                type="text"
                id="title"
                name="title"
                required
                style="width: 90%"
              />

              <label for="content">Content:</label>
              <textarea
                id="content"
                name="content"
                rows="4"
                required
                style="width: 90%"
              ></textarea>

              <button
                type="submit"
                style="
                  border: 1px solid #f9f79a;
                  background: #f9f79a;
                  padding: 1em 3em;
                  border-radius: 7px;
                  text-decoration: none;
                  color: black;
                  margin-top: 20px;
                "
              >
                Save Entry
              </button>
            </form>
          </div>
        </div>
      </div>
      <ul id="todoList"></ul>
    </div>

    <script>
      // Function to get the current date in the format YYYY-MM-DD
      function getCurrentDate() {
        const today = new Date();
        const year = today.getFullYear();
        const month = String(today.getMonth() + 1).padStart(2, "0");
        const day = String(today.getDate()).padStart(2, "0");
        return `${year}-${month}-${day}`;
      }

      function updateDayField() {
        const selectedDate = new Date(document.getElementById("date").value);
        const daysOfWeek = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        const dayOfWeek = daysOfWeek[selectedDate.getDay()];

        document.getElementById("day").value = dayOfWeek;
      }

      document.addEventListener("DOMContentLoaded", () => {
        const dateInput = document.getElementById("date");
        const dayInput = document.getElementById("day");

        dateInput.value = getCurrentDate();
        updateDayField();

        dateInput.addEventListener("change", updateDayField);
      });
    </script>
  </body>
</html>
