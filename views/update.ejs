<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Update Diary Entry</title>
    <link rel="stylesheet" href="/css/update.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
  </head>
  <body style="background-color: #ffffed">
    <h1 class="text-center mt-5 text-black">Update Diary Entry</h1>

    <form
      action="/update/<%= entry.id %>"
      method="POST"
      class="w-50 m-auto py-lg-3 px-lg-5 border border-1 border-dark rounded-1"
    >
      <label for="date" class="mt-3">Date:</label>
      <input
        type="date"
        id="date"
        name="date"
        value="<%= entry.date %>"
        required
      />

      <label for="day">Day:</label>
      <input
        type="text"
        id="day"
        name="day"
        value="<%= entry.day %>"
        required
      />

      <label for="title">Title:</label>
      <input
        type="text"
        id="title"
        name="title"
        value="<%= entry.title %>"
        required
      />

      <label for="content">Content:</label>
      <textarea
        class="w-100 p-3 mt-2"
        id="content"
        name="content"
        rows="4"
        required
      >
<%= entry.content %></textarea
      >

      <div class="buttons d-flex justify-content-center">
        <a href="/" class="w-25 mt-4 me-4">
          <button class="w-100 p-2 text-decoration-none text-dark rounded-1">
            Back to Diary
          </button>
        </a>
        <button
          type="submit"
          class="w-25 mt-4 p-2 text-decoration-none text-dark rounded-1"
        >
          Update Entry
        </button>
      </div>
    </form>

    <script>
      function updateDayField() {
        const selectedDate = new Date(document.getElementById("date").value);
        const daysOfWeek = [
          "Sunday",
          "Monday",
          "Tuesday",
          "Wednesday",
          "Thursday",
          "Friday",
          "Saturday",
        ];
        const dayOfWeek = daysOfWeek[selectedDate.getDay()];

        document.getElementById("day").value = dayOfWeek;
      }

      // Initialize day field when page loads
      updateDayField();

      // Update day field when date changes
      document
        .getElementById("date")
        .addEventListener("change", updateDayField);
    </script>
  </body>
</html>
